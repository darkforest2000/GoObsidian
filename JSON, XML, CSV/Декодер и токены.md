Декодер умеет считывать не только полные JSON-значения, но и отдельные _токены_ (token). Проще всего показать на примере.

Вот наш JSON-документ:

```json
[
    {
        "name": "Alice",
        "age": 25
    },
    {
        "name": "Emma",
        "age": 23
    },
    {
        "name": "Grace",
        "age": 27
    }
]
```

Прочитаем и напечатаем все токены в нем:

```go
f, err := os.Open("people.json")
// ...

dec := json.NewDecoder(bufio.NewReader(f))
for {
    tok, err := dec.Token()
    // ...
    fmt.Printf("%T: %v", tok, tok)
    if dec.More() {
        fmt.Print("...")
    }
    fmt.Print("\n")
}
```

Метод `Token()` начитывает очередной токен из источника. Токенами считаются названия полей, атомарные значения (строки, числа, true/false и null), а также разделители `[ ] { }`. Запятые и двоеточия игнорируются.

Результат:

```bash
json.Delim: [...

json.Delim: {...
string: name...
string: Alice...
string: age...
float64: 25
json.Delim: }...

json.Delim: {...
string: name...
string: Emma...
string: age...
float64: 23
json.Delim: }...

json.Delim: {...
string: name...
string: Grace...
string: age...
float64: 27
json.Delim: }

json.Delim: ]
```

_(пустые строки я добавил для наглядности)_

Метод `More()` сообщает, есть ли еще значения внутри объекта или массива, в котором находится текущая позиция декодера. Несколько примеров (текущая позиция отмечена знаками `^`):

```json
[
    {
        "name": "Alice",
                ^^^^^^^
        "age": 25
    },
    ...
]
```

Декодер находится внутри объекта Алисы. После `"Alice"` есть еще `"age"`, так что `More() == true`.

```json
[
    {
        "name": "Alice",
        "age": 25
        ^^^^^
    },
    ...
]
```

Декодер находится внутри объекта Алисы. После `"age"` есть еще `25`, так что `More() == true`.

```json
[
    {
        "name": "Alice",
        "age": 25
               ^^
    },
    ...
]
```

Декодер находится внутри объекта Алисы. После `25` значений нет, так что `More() == false`.

```json
[
    {
        "name": "Alice",
        "age": 25
    },
    ^
    {
        "name": "Emma",
        "age": 23
    },
    ...
]
```

Декодер вышел из объекта Алисы и теперь находится внутри массива верхнего уровня. После объекта Алисы есть еще объект Эммы, так что `More() == true`.

И так далее.

Сочетание методов `Token()` и `More()` поможет нам прочитать JSON-документ поточно. Давайте посмотрим, как.

[песочница](https://go.dev/play/p/4iIRNzQJLrZ)

[[JSON, XML, CSV]]